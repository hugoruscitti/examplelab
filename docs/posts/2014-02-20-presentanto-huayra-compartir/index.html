<!DOCTYPE html>
<html lang="en">
  <head>
    
      <title>Presentando huayra-compartir :: Examplelab — Mi blog</title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="Esta semana quiero presentarles un software que estamos escribiendo en conectar igualdad. Es una aplicación que vamos a incluir en el sistema operativo huayra GNU/Linux 2.0:
huayra-compartir es una herramienta que permite intercambiar archivos de manera muy sencilla; la aplicación puede descubrir a todos los equipos en la red automáticamente, ofrece una interfaz de usuario muy simple y no necesita acceso a Internet para funcionar:
El software surgió de una idea que teníamos en el equipo hace tiempo; por suerte los primeros prototipos salieron tan bien que arrancamos con todo!"/>
<meta name="keywords" content=""/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="https://www.examplelab.com.ar/posts/2014-02-20-presentanto-huayra-compartir/" />




<script src="https://www.examplelab.com.ar/js/menu.js"></script>
<script src="https://www.examplelab.com.ar/js/prism.js"></script>
<script src="https://www.examplelab.com.ar/js/theme.js"></script>
<script src="https://www.examplelab.com.ar/js/imagenes.js"></script>


<link rel="stylesheet" href="https://www.examplelab.com.ar/assets/style.css">

<link rel="stylesheet" href="https://www.examplelab.com.ar/css/estilo.css">
<link rel="stylesheet" href="https://www.examplelab.com.ar/css/tachyons.min.css">


<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://www.examplelab.com.ar/img/apple-touch-icon-144-precomposed.png">
<link rel="shortcut icon" href="https://www.examplelab.com.ar/favicon-16x16.png?1">


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Presentando huayra-compartir"/>
<meta name="twitter:description" content="Esta semana quiero presentarles un software que estamos escribiendo en conectar igualdad..."/>



<meta property="og:title" content="Presentando huayra-compartir" />
<meta property="og:description" content="Esta semana quiero presentarles un software que estamos escribiendo en conectar igualdad..." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.examplelab.com.ar/posts/2014-02-20-presentanto-huayra-compartir/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2014-02-20T13:14:26+00:00" />
<meta property="article:modified_time" content="2014-02-20T13:14:26+00:00" /><meta property="og:site_name" content="Examplelab" />







  </head>
  <body class="">
    <script>
      procesar_theme();
    </script>

    <div class="container">
      <header class="header">
  <span class="header__inner measure-2">
    <a href="/" class="logo" style="text-decoration: none;">
  <img width="64" height="64" src="/logo.png" alt="Logo" />
  <span class="logo__text pl2"> examplelab</span>
</a>

    <span class="header__right">
      
        <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/about/index.html">Acerca de</a></li>
        
      
        
          <li><a href="/posts/index.html">Artículos</a></li>
        
      
        
          <li><a href="/links/index.html">Links</a></li>
        
      
      
    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/about/index.html">Acerca de</a></li>
      
    
      
        <li><a href="/posts/index.html">Artículos</a></li>
      
    
      
        <li><a href="/links/index.html">Links</a></li>
      
    
  </ul>
</nav>

        <span class="menu-trigger hidden">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0z" fill="none"/>
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
          </svg>
        </span>
      
      <span class="theme-toggle">
        <svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>

      </span>
    </span>
  </span>
</header>


      <div class="content">
        

  <div id="preview" role="button" class="dn no-user-select pointer overflow-auto vh-100 vw-100 bg-black-50 fixed z-max absolute--fill items-center justify-center">
    <div id="preview-content">
      <img src="/images/2021/la-culpa-no-es-del-dom/diff.png">
    </div>
  </div>


  <div class="post">
    <h2 class="post-title"><a href="https://www.examplelab.com.ar/posts/2014-02-20-presentanto-huayra-compartir/">Presentando huayra-compartir</a></h2>
    <div class="post-meta">
      
        <span class="post-date">
            20/02/2014
        </span>
      
      
      
    </div>

    

    <div class="post-content">
      <p>Esta semana quiero presentarles un software que estamos escribiendo en conectar igualdad. Es una aplicación que vamos a incluir en el sistema operativo <strong>huayra GNU/Linux 2.0</strong>:</p>
<p><img src="/images/2014/Feb/parallaxvieww.png" alt=""></p>
<p><strong>huayra-compartir</strong> es una herramienta que permite intercambiar archivos de manera muy sencilla; la aplicación puede descubrir a todos los equipos en la red automáticamente, ofrece una interfaz de usuario muy simple y no necesita acceso a Internet para funcionar:</p>
<p><img src="/images/2014/Feb/huayra_2_generador_de_paquetes__beta___Running__2014_02_01_19_49_36.png" alt=""></p>
<p>El software surgió de una idea que teníamos en el equipo hace tiempo; por suerte los primeros prototipos salieron tan bien que arrancamos con todo!</p>
<h3 id="secciones">Secciones</h3>
<p>La aplicación tiene tres funcionalidades importantes: te permite ver a los equipos conectados en la red, navegar por los archivos compartidos e iniciar descargas.</p>
<p>La sección <strong>amigos</strong> te permite ver a todos los equipos en la red que utilizan <strong>huayra-compartir</strong>.</p>
<p>Por ejemplo, en esta captura, Ignacio estába compartiendo archivos en dos computadoras:</p>
<p><img src="/images/2014/Feb/huayra_2_generador_de_paquetes__beta___Running__2014_02_01_19_55_13-1.png" alt=""></p>
<p>Luego hay una vista de archivos. Por ejemplo si existe un equipo en la red bajo el nombre Hugo y hago click sobre él aparece la siguiente pantalla:</p>
<p><img src="/images/2014/Feb/huayra_2_generador_de_paquetes__beta___Running__2014_02_01_20_01_09.png" alt=""></p>
<p>Cada vez que hacés click sobre un archivo, se inicia una descarga dentro de la sección <strong>descargas</strong>. De forma tal que la interfaz nunca te interrumpe, podés seguir navegando y seleccionando mas cosas para bajar.</p>
<p>Así se ve la sección <strong>descargas</strong>:</p>
<p><img src="/images/2014/Feb/huayra_2_generador_de_paquetes__beta___Running__2014_02_01_20_02_32.png" alt=""></p>
<h3 id="su-versión-predecesora">Su versión predecesora</h3>
<p>Esta aplicación no es algo completamente nuevo. Bah, en realidad es casi todo nuevo, excepto la &ldquo;idea&rdquo;.</p>
<p><strong>huayra-compartir</strong> es la secuela de una aplicación llamada <strong>compartir-web</strong> (que se incluía en la primer versión de huayra-linux).</p>
<p><strong>compartir-web</strong> ofreciá algo muy parecido, te permitía colocar archivos en una carpeta y desde cualquier equipo de la red podía verlos y descargarlos.</p>
<p>Por ejemplo, cuando ingresabas a localhost, o el puerto 80 con la ip del equipo te aparecería en pantalla lo siguiente:</p>
<p><img src="/images/2014/Feb/huayra_2_generador_de_paquetes__beta___Running__2014_02_01_20_09_41.png" alt=""></p>
<p>Lo diferente en esta nueva versión es que cuenta con una interfaz de usuario propia, donde se descubren los equipos automáticamente. Pero la idea general es muy similar.</p>
<p>Otra diferencia es la plataforma de implementación. Antes se utiliza <strong>lighttpd</strong> para servir los archivos y <strong>chromium</strong> para visualizarlos. Ahora todo está sobre <strong>node-webkit</strong> encapsulando a <em>express</em>, <em>angularjs</em>, <em>bootstrap</em>, y algunas cosas mas !</p>
<p>Pienso que esta nueva versión es algo mas sencilla de utilizar, pero naturalmente reconozco que también es mucho mas compleja&hellip; es un balance algo raro, el enfoque que usabamos antes era mucho mas sólido.</p>
<h2 id="cómo-está-implementado">¿Cómo está implementado?</h2>
<p>Para implementar la aplicación usamos varias ideas y tecnologías diferentes.</p>
<p>Intentaré resumirte los conceptos principales de la solución por si lo querés investigar y ayudarnos a mejorarlo ;)</p>
<h3 id="node-webkit-como-plataforma">Node-webkit como plataforma</h3>
<p>La aplicación completa está implementada sobre <a href="https://github.com/rogerwang/node-webkit">node-webkit</a>, una plataforma para construir aplicaciones nativas usando HTML5 + nodejs.</p>
<p>Si nunca viste node-webkit, tal vez te resulte útil ver una charla que di hace tiempo llamada: <a href="http://www.youtube.com/watch?v=TzDhzayO_uk">Haciendo aplicaciones complejas de manera simple (con node-webkit)</a></p>
<h3 id="interfaz-con-css-y-html">Interfaz con CSS y HTML</h3>
<p>La interfaz está construida utilizando HTML, el famoso framework CSS <a href="http://getbootstrap.com/">bootstrap</a> y un <em>theme</em> que había comprado hace unos meses en el sitio <a href="https://wrapbootstrap.com/">wrapbootstrap</a>.</p>
<p>Luego, la estructura de aplicación y todas las interacciones las realizamos mediante <a href="http://angularjs.org">angularjs</a></p>
<p>Aquí se ve un ejemplo de intercambio de vistas que utilizamos para el panel principal:</p>
<p><img src="/images/2014/Feb/ScreenFlow2.gif" alt=""></p>
<h3 id="el-formato-de-intercambio">El formato de intercambio</h3>
<p>Para que los equipos puedan exponer sus archivos compartidos usamos el microframework <a href="http://expressjs.com">express</a> y un formato de intercambio muy simple: <strong>json</strong></p>
<p>Si querés visualizar cómo se ve el formato de intercambio, lo mas sencillo es abrir un navegador y apuntar a la url que muestra la consola de <strong>huayra-compartir</strong> cuando se inicia:</p>
<p><img src="/images/2014/Feb/Huayra_Compartir_2014_02_13_23_25_49.png" alt=""></p>
<p>Así es como se ve el formato de datos desde un navegador tradicional:</p>
<p><img src="/images/2014/Feb/192_168_1_101_9110_2014_02_13_23_28_27.png" alt=""></p>
<p>A su vez, el atributo &ldquo;archivos&rdquo; de la respuesta nos da una URL para acceder a los archivos compartidos:</p>
<p><img src="/images/2014/Feb/_2014_02_13_23_31_45.png" alt=""></p>
<p>Esta forma de construir las rutas y exponerlas como datos (<em>à la</em> <a href="http://en.wikipedia.org/wiki/HATEOAS">hypermedia</a>) nos ayudó un montón a depurar y visualizar lo que la aplicación efectivamente cuando las cosas no funcionába como esperábamos.</p>
<p>Además, este formato de datos &ldquo;enlazados&rdquo; se pueden navegar de manera muy sencilla si instalás en tu navegador la extensión <a href="https://chrome.google.com/webstore/detail/chklaanhfefbnpoihckbnefhakgolnmc">JSON View</a>.</p>
<h3 id="descubriendo-equipos-con-polo">Descubriendo equipos con &ldquo;polo&rdquo;</h3>
<p>Para descubrir los equipos comencé investigando  varias bibliotecas en <a href="http://npmjs.org">npmjs.org</a>.</p>
<p>Casi todas las bibliotecas que probé hacían prácticamente lo mismo, ofrecián una capa de abstracción sobre zeroconf/bonjour/mdns.</p>
<p><em>mdns</em> me pareció una de las mas completas y funcionales, pero luego de varias pruebas y experimentos cambié mi elección por una alternativa mas sencilla llamada &ldquo;polo&rdquo;.</p>
<p>En <strong>Polo</strong>, la idea general es que cada equipo tiene la posiblidad realizar un anuncio de inicialización de servicio (llamado &ldquo;up&rdquo;) en la red local. Emitir un mensaje de aviso de este tipo sirve para que todos los equipos en la red reciban la noticia y los datos para comenzar a usar ese servicio.</p>
<p>Esto me pareció espectacular, imaginá: podés iniciar un servicio tipo webserver, luego hacer un anuncio en la red y corroborar que todos los equipos subscriptos se enterarán al instante.</p>
<p><img src="/images/2014/Feb/2014_02_19_23_08_28.jpg" alt=""></p>
<p>Así funciona el corazón de <strong>huayra-compartir</strong>,  cada cliente inicia un webserver (que expone los archivos que comparte el equipo), luego hace un anuncio en la red y por último se pone a escuchar las notificaciones en la red.</p>
<p>Para instalar <code>polo</code> en nodewebkit usamos <code>npm</code> así:</p>
<pre><code> npm install polo --save
</code></pre>
<p>Hay unos ejemplos básicos de utilizanción de polo en el <a href="https://www.npmjs.org/package/polo">repositorio oficial de npm</a>, es mucho mas sencillo de usar de lo que parece al principio.</p>
<h2 id="a-futuro-">A futuro &hellip;</h2>
<p>Hay varias cosas que nos gustaría implementar en las próximas versiones: estaría buenisimo tener un chat, poder descargar carpetas completas con un solo click, añadir gráficas de la red, etc&hellip;</p>
<p>Cuando mostramos el software en la oficina volaron mil ideas, y saltaron algunos bugs también (naturalmente).</p>
<p>Te invito a visitar el repositorio del proyecto, me gustaría que nos cuentes que cosas le agregarías o te gustaría cambiar.</p>
<p>Seguramente vamos a estar implementando mas cosas por ahí pronto:</p>
<p><a href="https://github.com/HuayraLinux/huayra-compartirweb">https://github.com/HuayraLinux/huayra-compartirweb</a></p>
<p>¡Saludos!</p>

    </div>

    
      
        <div class="pagination">
          <div class="pagination__title">
            <span class="pagination__title-h">Leer otros artículos</span>
            <hr />
          </div>
          <div class="pagination__buttons">
            
              <span class="button previous">
                <a href="https://www.examplelab.com.ar/posts/2014-02-28-interrumpiendo-al-programador/">
                  <span class="button__icon">←</span>
                  <span class="button__text">Interrumpiendo al programador</span>
                </a>
              </span>
            
            
              <span class="button next">
                <a href="https://www.examplelab.com.ar/posts/2014-01-29-como-instalar-nodejs-en-huayra-linux/">
                  <span class="button__text">Como instalar nodejs en huayra-linux</span>
                  <span class="button__icon">→</span>
                </a>
              </span>
            
          </div>
        </div>
      
    


    
      
        

      
    

    </div>

      </div>

      
        <footer class="footer">
  <div class="footer__inner">
    
      <a href="/" class="logo" style="text-decoration: none;">
  <img width="64" height="64" src="/logo.png" alt="Logo" />
  <span class="logo__text pl2"> examplelab</span>
</a>

      <div class="copyright">
        <span>© 2010-2023 Hugo Ruscitti</span>
      </div>
    
  </div>
</footer>


<script src="https://www.examplelab.com.ar/assets/prism.js"></script>


      
    </div>
  </body>
</html>
